{% extends 'layouts/page.njk' %}

{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}

{#
  Updated "How We Generate Answers" page reflecting accessibility and content recommendations:
  - Adds brief plain‑language descriptions for technical terms so non‑technical users understand them.
  - Renames the “Technical Overview” section to “Technical details for specialists” to clarify audience.
  - Provides a contact link so users can easily get help.
  - Maintains GDS style and concise, professional tone.
#}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: phaseTag
    },
    html: phaseTagText
  }) }}
{% endblock %}

{% block content %}
  <h1 class="govuk-heading-xl">How We Generate Answers</h1>

  <p class="govuk-body">Our AI system uses a Retrieval‑Augmented Generation (RAG) approach to provide accurate and relevant answers to your questions.  This process is designed to ensure transparency, reliability and security, in line with government standards.</p>

  <h2 class="govuk-heading-m">How it works</h2>
  <ol class="govuk-list govuk-list--number">
    <li>
      <strong>Document and content retrieval:</strong> We search across a range of trusted sources, including official documents (PDFs, Word files, etc.) and external government content (for example GOV.UK pages).
    </li>
    <li>
      <strong>Similarity search:</strong> Using advanced algorithms, we identify the most relevant documents and web pages related to your question.
    </li>
    <li>
      <strong>Relevance grading:</strong> Retrieved documents are graded to ensure they are highly relevant to your query.
    </li>
    <li>
      <strong>Grounded answer generation:</strong> The system checks that the answer is based on the retrieved documents, minimising the risk of hallucinations (inaccurate or fabricated information).
    </li>
    <li>
      <strong>Final answer creation:</strong> A clear and concise answer is generated, grounded in the most relevant and reliable information available.
    </li>
  </ol>

  <h2 class="govuk-heading-m">Technical details for specialists</h2>
  <ul class="govuk-list govuk-list--bullet">
    <li><strong>LangGraph</strong> – a framework for building AI workflows, used alongside <strong>LangChain</strong> – a toolkit for connecting language models with external data sources.</li>
    <li>Developed using <strong>Python</strong> and <strong>Node.js</strong> programming languages.</li>
    <li>Powered by <strong>AWS Bedrock Models</strong>, such as Claude 3.7 and AWS Nova Lite, to generate answers.</li>
    <li>Stores vector data in <strong>Postgres</strong> with <strong>PGVector</strong>, a vector extension for secure and efficient similarity search.</li>
  </ul>

  <h2 class="govuk-heading-m">Security and guardrails</h2>
  <p class="govuk-body">We have implemented numerous guardrails and security enhancements to ensure a safe and appropriate experience for all users.  Our system complies with Government Digital Service (GDS) standards, protecting your data and privacy at every step.</p>

  <p class="govuk-body">If you have any questions or feedback about how this AI works, please <a class="govuk-link" href="/contact">contact the service team</a>.</p>
{% endblock %}
